## CPU 스케줄링

## 캐시(Cache)란
## 데드락(DeadLock)
### 데드락이란?
- 프로세스가 자원을 얻지 못해 다음 처리를 하지 못하는 상태로, ‘교착 상태’라고도 하며 시스템적으로 한정된 자원을 여러 곳에서 사용하려고 할 때 발생

### 데드락의 발생조건
1. 상호 배제 (Mutual exclusion)
	- 자원은 한 번에 한 프로세스만이 사용할 수 있어야 한다.

 2. 점유 대기 (Hold and wait)
	- 최소한 하나의 자원을 점유하고 있으면서 다른 프로세스에 할당되어 사용하고 있는 자원을 추가로 점유하기 위해 대기하는 프로세스가 있어야 한다.

 3. 비선점 (No preemption)
	- 다른 프로세스에 할당된 자원은 사용이 끝날 때까지 강제로 빼앗을 수 없어야 한다.

 4. 순환 대기 (Circular wait)
	- 프로세스의 집합 {P0, P1, ,…Pn}에서 P0는 P1이 점유한 자원을 대기하고 P1은 P2가 점유한 자원을 대기하고 P2…Pn-1은 Pn이 점유한 자원을 대기하며 Pn은 P0가 점유한 자원을 요구해야 한다.
**아래의 네 가지 조건 중 하나라도 성립하지 않도록 만든다면 교착 상태를 해결할 수 있음!**

### 데드락 처리
#### 교착 상태를 예방하고, 회피한다!
1. 예방(prevention)
	1. 교착 상태 발생 조건 중 하나를 제거하면서 해결한다 (자원 낭비 엄청 심함)
2. 회피(avoidance)
	1. 교착 상태 발생 시 피해나가는 방법
		1. ex) 은행원 알고리즘
	 > - 은행에서 모든 고객의 요구가 충족되도록 현금을 할당하는데서 유래함
    > - 프로세스가 자원을 요구할 때, 시스템은 자원을 할당한 후에도 안정 상태로 남아있게 되는지 사전에 검사하여 교착 상태 회피
    > - 안정 상태면 자원 할당, 아니면 다른 프로세스들이 자원 해지까지 대기

#### 교착 상태를 탐지하고 회복한다!
1. 탐지(detection)
	1. 자원 할당 그래프를 통해 교착 상태를 탐지함
	2. 자원 요청 시, 탐지 알고리즘을 실행시켜 그에 대한 오버헤드 발생함
2. 회복(recovery)
	1. 교착 상태 일으킨 프로세스를 종료하거나, 할당된 자원을 해제시켜 회복시키는 방법

### 꼬리질문
1. 데드락(교착 상태)가 뭔가요? 발생 조건에 대해 말해보세요.
    
2. 회피 기법인 은행원 알고리즘이 뭔지 설명해보세요.
    
3. 기아상태를 설명하는 식사하는 철학자 문제에 대해 설명해보세요.


## Race Condition
### Race Condition이란?
- 2개 이상의 프로세스가 공통 자원을 병행적으로 읽거나 쓰는 동작을 할 때, 공용 데이터에 대한 접근이 어떤 순서에 따라 이루어졌는지에 따라 그 실행 결과가 같지 않고 달라지는 상황
- Race의 뜻 그대로, 간단히 말하면 경쟁하는 상태, 즉 두 개의 스레드가 하나의 자원을 놓고 서로 사용하려고 경쟁하는 상황
![](https://i.imgur.com/pKR0QcV.png)


## 세마포어(Semaphore) & 뮤텍스(Mutex)
### 세마포어란?
공유된 자원에 여러 프로세스가 동시에 접근하면서 문제가 발생할 수 있다. 이때 공유된 자원의 데이터는 한 번에 하나의 프로세스만 접근할 수 있도록 제한을 둬야 한다.

이를 위해 나온 것이 바로 **'세마포어'**

**세마포어** : 멀티프로그래밍 환경에서 공유 자원에 대한 접근을 제한하는 방법

#### 임계 구역(Critical Section)

여러 프로세스가 데이터를 공유하며 수행될 때, **각 프로세스에서 공유 데이터를 접근하는 프로그램 코드 부분**

### 뮤텍스란?

공유 데이터를 여러 프로세스가 동시에 접근할 때 잘못된 결과를 만들 수 있기 때문에, 한 프로세스가 임계 구역을 수행할 때는 다른 프로세스가 접근하지 못하도록 해야 한다.

**뮤텍스** : 임계 구역을 가진 스레드들의 실행시간이 서로 겹치지 않고 각각 단독으로 실행되게 하는 기술

> 상호 배제(**Mut**ual **Ex**clusion)의 약자임

**상태가 0,1로 이진 세마포어**


![](https://i.imgur.com/Zr6WM8W.png)
![](https://i.imgur.com/wXnWIbx.png)

### 꼬리질문) 세마포어와 뮤텍스의 차이는?
1. **세마포어는 뮤텍스가 될수 있지만, 뮤텍스는 세마포어가 될 수 없습니다.**

뮤텍스는 항상 열쇠 1개이고, 세마포어는 여러개 가질 수 있기 때문에 
세마포어의 열쇠가 1개라면 뮤텍스와 같습니다.

2. **세마포어는 파일시스템 상 파일형태로 존재, 뮤텍스는 프로세스 범위입니다.**

즉, 프로세스가 사라질 때 뮤텍스는 clean up 됩니다.
세마포어는 소유할 수 없는 반면, 뮤텍스는 소유할 수 있습니다.

3. **뮤텍스의 경우, 뮤텍스를 소유하고 있는 쓰레드가 이 뮤텍스를 해제할 수 있습니다.**

**반면, 세마포어의 경우, 세마포어를 소유하고 있지 않은 쓰레드도 이 세마포어를 해제할 수 있습니다.**
## 페이징 & 세그먼테이션 (PDF)
## 페이지 교체 알고리즘
